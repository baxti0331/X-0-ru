<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Игра: Анаграммы</title>
<style>
  #loaderScreen {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background: linear-gradient(135deg, #74b9ff, #0984e3);
    display: flex; justify-content: center; align-items: center; flex-direction: column;
    color: #f0f0f0; font-size: 28px; font-weight: 700; z-index: 1000;
  }
  .spinner {
    margin-top: 20px; width: 60px; height: 60px;
    border: 8px solid rgba(240, 240, 240, 0.3);
    border-top: 8px solid #f0f0f0; border-radius: 50%;
    animation: spin 1.2s linear infinite;
  }
  @keyframes spin {
    0% { transform: rotate(0deg);}
    100% { transform: rotate(360deg);}
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #6dd5fa, #2980b9);
    color: #222; margin: 0; padding: 20px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    height: 100vh; user-select: none; overflow: hidden;
  }
  #scoreboard {
    color: white;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 20px;
    user-select: none;
    z-index: 1;
  }
  #wordContainer {
    display: flex;
    gap: 12px;
    font-size: 64px;
    color: white;
    font-weight: 700;
    user-select: none;
    margin-bottom: 30px;
  }
  .letter {
    background: rgba(255 255 255 / 0.2);
    border-radius: 10px;
    width: 60px;
    height: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  .letter:hover {
    background: rgba(255 255 255 / 0.4);
  }
  #message {
    margin-top: 20px;
    color: #fff;
    font-size: 24px;
    font-weight: 600;
    min-height: 36px;
    user-select: none;
    z-index: 1;
  }
  #checkButton {
    margin-top: 30px;
    font-size: 22px;
    padding: 12px 28px;
    border: none;
    border-radius: 14px;
    background: #0984e3;
    color: white;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  #checkButton:hover:not(:disabled) {
    background: #74b9ff;
  }
  #checkButton:disabled {
    background: #777;
    cursor: default;
  }
</style>
</head>
<body>
<div id="loaderScreen">Игра загружается...<div class="spinner"></div></div>

<div id="scoreboard">Очки: 0</div>

<div id="wordContainer"></div>

<button id="checkButton" disabled>Проверить</button>

<div id="message"></div>

<script>
window.onload = () => {
  setTimeout(() => {
    document.getElementById('loaderScreen').style.display = 'none';
    startGame();
  }, 1500);
};

const words = [
  "абрик", "аванс", "аврал", "автор", "агент", "адрес", "азарт", "акция", "акула", "актер",
  "алмаз", "альфа", "амбар", "анонс", "апорт", "арена", "арест", "армия", "атака", "афера",
  "базис", "байка", "балет", "балка", "банда", "банка", "барон", "бегле", "белок", "билет",
  "бинок", "биржа", "богат", "бокал", "болид", "бонус", "борец", "босс", "броня", "будка",
  "буфет", "бухта", "взлет", "вилка", "винт", "вирус", "волна", "время", "выбор", "вышка",
  "газон", "гайка", "галка", "гамма", "гараж", "гвард", "гвозд", "гений", "герой", "гитара",
  "глава", "гнезд", "голос", "грань", "графа", "губка", "густо", "дача", "дверь", "дедук",
  "дележ", "детка", "дичь", "долг", "домик", "донор", "дорог", "доска", "драка", "драма",
  "дробь", "друг", "дымок", "еврей", "жабра", "жажда", "ждать", "желез", "жена", "жердь",
  "живот", "жирок", "жница", "забег", "закон", "засор", "заход", "заяц", "звено", "звонк",
  "зебра", "зодчий", "зола", "зона", "зубец", "игрок", "идол", "изба", "икона", "импорт",
  "индик", "искры", "испуг", "кабан", "казак", "калий", "калит", "камин", "канал", "каска",
  "квант", "кедр", "коза", "козел", "койка", "кокон", "колба", "колон", "комар", "конек",
  "копия", "корка", "короб", "коса", "котел", "крага", "кран", "кредо", "крик", "кроль",
  "круг", "кубик", "кулак", "купаж", "курс", "кусок", "ладан", "ладья", "лакей", "лампа",
  "ланка", "лапка", "ларец", "латте", "лепет", "леска", "лето", "лидер", "лист", "литер",
  "ложка", "локон", "лоза", "лыжа", "мажор", "мазок", "майор", "макет", "малый", "мантия",
  "марка", "маска", "мастер", "матка", "медик", "мелод", "милка", "мираж", "миска", "молва",
  "мороз", "моряк", "музей", "мусор", "набор", "накал", "напев", "наука", "начал", "невод",
  "немец", "низко", "нитка", "новак", "нога", "носик", "обида", "облик", "огонь", "одежда",
  "ожог", "озеро", "округ", "олива", "опера", "опасн", "оплот", "опора", "осина", "остов",
  "отвал", "отель", "отказ", "отлив", "отрез", "офсет", "очаг", "пакет", "панда", "парус",
  "паста", "пауза", "пена", "перец", "песок", "пикет", "пила", "план", "племя", "плоть",
  "побег", "повар", "подвал", "поднос", "позыв", "пойма", "покуп", "поле", "полос", "помпа",
  "порог", "посох", "поток", "почва", "почка", "празд", "прима", "проба", "пруд", "прыжок",
  "птица", "пушка", "путь", "пчела", "работа", "радио", "разговор", "ракет", "рамка", "рапорт",
  "растор", "рвать", "речка", "рисок", "рота", "рубка", "рулет", "рулон", "рыбак", "рысь",
  "ряда", "рядок", "сабля", "сайт", "сало", "самец", "самка", "сапог", "сарай", "сварка",
  "свеча", "сектор", "сено", "сила", "сироп", "сказка", "скала", "сквер", "склад", "склон",
  "слава", "слово", "снова", "снос", "сокол", "солид", "сосуд", "спектр", "спина", "спичка",
  "спор", "способ", "среда", "срок", "сталь", "степь", "стих", "стол", "страх", "строка",
  "ступа", "суть", "сфера", "сырок", "сыщик", "табак", "тайна", "талант", "талия", "танец",
  "тара", "тариф", "театр", "тело", "темп", "тенор", "терем", "тигр", "тимус", "тираж",
  "тихое", "точка", "трава", "треск"
];

// Скопируй/вставь сюда полный словарь из 1000+ слов, если нужно.

let score = 0;
let usedIndexes = new Set();
let currentWord = "";
let shuffledWord = [];
const scoreboard = document.getElementById('scoreboard');
const wordContainer = document.getElementById('wordContainer');
const checkButton = document.getElementById('checkButton');
const message = document.getElementById('message');

function shuffleArray(arr) {
  // Фишка: простой тасование Фишера-Йетса
  for(let i = arr.length -1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function pickNewWord() {
  if (usedIndexes.size === words.length) {
    // Все слова использованы
    message.textContent = "Слова закончились! Игра окончена.";
    wordContainer.innerHTML = "";
    checkButton.disabled = true;
    return false;
  }
  let idx;
  do {
    idx = Math.floor(Math.random() * words.length);
  } while (usedIndexes.has(idx));
  usedIndexes.add(idx);
  currentWord = words[idx];
  return true;
}

function displayShuffledWord() {
  // Перемешать буквы текущего слова (но не так, чтобы совпало с оригиналом)
  let arr = currentWord.split('');
  do {
    arr = shuffleArray(arr.slice());
  } while(arr.join('') === currentWord);
  shuffledWord = arr;
  renderWord();
  checkButton.disabled = false;
  message.textContent = "";
}

function renderWord() {
  wordContainer.innerHTML = "";
  shuffledWord.forEach((letter, i) => {
    const span = document.createElement('div');
    span.classList.add('letter');
    span.textContent = letter.toUpperCase();
    span.onclick = () => {
      // Клик по букве — меняем её с соседней
      // Простая логика — меняем с правой, если есть, иначе с левой
      if(i < shuffledWord.length -1) {
        [shuffledWord[i], shuffledWord[i+1]] = [shuffledWord[i+1], shuffledWord[i]];
      } else if(i > 0) {
        [shuffledWord[i], shuffledWord[i-1]] = [shuffledWord[i-1], shuffledWord[i]];
      }
      renderWord();
    }
    wordContainer.appendChild(span);
  });
}

function checkAnswer() {
  const answer = shuffledWord.join('');
  if (answer === currentWord) {
    score++;
    scoreboard.textContent = `Очки: ${score}`;
    message.style.color = "#7FFF00";
    message.textContent = "Правильно! Следующее слово...";
    checkButton.disabled = true;
    setTimeout(() => {
      if(pickNewWord()) {
        displayShuffledWord();
      }
    }, 1200);
  } else if(words.includes(answer)) {
    // Если игрок собрал другое слово из списка (разное от текущего) - тоже засчитываем
    score++;
    scoreboard.textContent = `Очки: ${score}`;
    message.style.color = "#7FFF00";
    message.textContent = `Правильно! Это слово "${answer.toUpperCase()}". Следующее слово...`;
    checkButton.disabled = true;
    setTimeout(() => {
      if(pickNewWord()) {
        displayShuffledWord();
      }
    }, 1400);
  } else {
    message.style.color = "#FF6347";
    message.textContent = "Неверно! Попробуй ещё.";
  }
}

function startGame() {
  score = 0;
  usedIndexes.clear();
  scoreboard.textContent = `Очки: ${score}`;
  message.textContent = "";
  if(pickNewWord()) {
    displayShuffledWord();
  }
}

checkButton.onclick = checkAnswer;
</script>
</body>
</html>