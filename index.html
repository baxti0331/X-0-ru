<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Игра: Анаграммы с подсказкой буквы</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #6dd5fa, #2980b9);
    color: #222;
    margin: 0; padding: 20px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    height: 100vh;
    user-select: none;
  }
  #scoreboard {
    color: white;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 20px;
    user-select: none;
  }
  #hint {
    color: #fffb99;
    font-size: 20px;
    margin-bottom: 15px;
    user-select: none;
  }
  #wordContainer {
    display: flex;
    gap: 10px;
    font-size: 64px;
    color: white;
    font-weight: 700;
    user-select: none;
    margin-bottom: 40px;
  }
  .letter {
    background: rgba(255 255 255 / 0.2);
    border-radius: 10px;
    width: 60px;
    height: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  .letter:hover {
    background: rgba(255 255 255 / 0.4);
  }
  #message {
    color: white;
    font-size: 24px;
    font-weight: 600;
    min-height: 30px;
    margin-bottom: 20px;
    user-select: none;
  }
  /* Фейерверк - простая анимация */
  .firework {
    position: fixed;
    pointer-events: none;
    top: 50%;
    left: 50%;
    width: 200px;
    height: 200px;
    margin-left: -100px;
    margin-top: -100px;
    background: radial-gradient(circle, #ff0 10%, transparent 40%);
    border-radius: 50%;
    animation: explode 0.8s ease-out forwards;
    z-index: 1000;
  }
  @keyframes explode {
    0% {
      transform: scale(0.1);
      opacity: 1;
    }
    100% {
      transform: scale(1.5);
      opacity: 0;
    }
  }
</style>
</head>
<body>

<div id="scoreboard">Очки: 0</div>
<div id="hint">Подсказка: буква — ?</div>
<div id="wordContainer"></div>
<div id="message"></div>

<script>
const words = [
  "балет", "актер", "горизонт", "дракон", "жираф", "лидер", "мороз", "праздник", "салют", "танец",
  "фестиваль", "школа", "энергия", "яблоко", "шахматы", "река", "окно", "гора", "зима",
  "абрик", "аванс", "аврал", "автор", "агент", "адрес", "азарт", "акция", "акула", "актер",
  "алмаз", "альфа", "амбар", "анонс", "апорт", "арена", "арест", "армия", "атака", "афера",
  "базис", "байка", "балет", "балка", "банда", "банка", "барон", "бегле", "белок", "билет",
  "бинок", "биржа", "богат", "бокал", "болид", "бонус", "борец", "босс", "броня", "будка",
  "буфет", "бухта", "взлет", "вилка", "винт", "вирус", "волна", "время", "выбор", "вышка",
  "газон", "гайка", "галка", "гамма", "гараж", "гвард", "гвозд", "гений", "герой", "гитара",
  "глава", "гнезд", "голос", "грань", "графа", "губка", "густо", "дача", "дверь", "дедук",
  "дележ", "детка", "дичь", "долг", "домик", "донор", "дорог", "доска", "драка", "драма",
  "дробь", "друг", "дымок", "еврей", "жабра", "жажда", "ждать", "желез", "жена", "жердь",
  "живот", "жирок", "жница", "забег", "закон", "засор", "заход", "заяц", "звено", "звонк",
  "зебра", "зодчий", "зола", "зона", "зубец", "игрок", "идол", "изба", "икона", "импорт",
  "индик", "искры", "испуг", "кабан", "казак", "калий", "калит", "камин", "канал", "каска",
  "квант", "кедр", "коза", "козел", "койка", "кокон", "колба", "колон", "комар", "конек",
  "копия", "корка", "короб", "коса", "котел", "крага", "кран", "кредо", "крик", "кроль",
  "круг", "кубик", "кулак", "купаж", "курс", "кусок", "ладан", "ладья", "лакей", "лампа",
  "ланка", "лапка", "ларец", "латте", "лепет", "леска", "лето", "лидер", "лист", "литер",
  "ложка", "локон", "лоза", "лыжа", "мажор", "мазок", "майор", "макет", "малый", "мантия",
  "марка", "маска", "мастер", "матка", "медик", "мелод", "милка", "мираж", "миска", "молва",
  "мороз", "моряк", "музей", "мусор", "набор", "накал", "напев", "наука", "начал", "невод",
  "немец", "низко", "нитка", "новак", "нога", "носик", "обида", "облик", "огонь", "одежда",
  "ожог", "озеро", "округ", "олива", "опера", "опасн", "оплот", "опора", "осина", "остов",
  "отвал", "отель", "отказ", "отлив", "отрез", "офсет", "очаг", "пакет", "панда", "парус",
  "паста", "пауза", "пена", "перец", "песок", "пикет", "пила", "план", "племя", "плоть",
  "побег", "повар", "подвал", "поднос", "позыв", "пойма", "покуп", "поле", "полос", "помпа",
  "порог", "посох", "поток", "почва", "почка", "празд", "прима", "проба", "пруд", "прыжок",
  "птица", "пушка", "путь", "пчела", "работа", "радио", "разговор", "ракет", "рамка", "рапорт",
  "растор", "рвать", "речка", "рисок", "рота", "рубка", "рулет", "рулон", "рыбак", "рысь",
  "ряда", "рядок", "сабля", "сайт", "сало", "самец", "самка", "сапог", "сарай", "сварка",
  "свеча", "сектор", "сено", "сила", "сироп", "сказка", "скала", "сквер", "склад", "склон",
  "слава", "слово", "снова", "снос", "сокол", "солид", "сосуд", "спектр", "спина", "спичка",
  "спор", "способ", "среда", "срок", "сталь", "степь", "стих", "стол", "страх", "строка",
  "ступа", "суть", "сфера", "сырок", "сыщик", "табак", "тайна", "талант", "талия", "танец",
  "тара", "тариф", "театр", "тело", "темп", "тенор", "терем", "тигр", "тимус", "тираж",
  "тихое", "точка", "трава", "треск", "троп", "тулуп", "туман", "турнир", "тушь", "тысяч",
  "угол", "удача", "узор", "указ", "улыбка", "упрек", "ураган", "усмешка", "утро", "факел",
  "фаза", "фильм", "флаг", "флейта", "фокус", "фонарь", "форма", "фраза", "фрегат", "фрукт",
  "фургон", "халат", "характер", "хвост", "хлеб", "хор", "храм", "цель", "цирк", "цвет",
  "цифра", "час", "часы", "чемодан", "чердак", "честь", "число", "чистота", "чулок", "шанс",
  "шар", "шахта", "шашка", "школа", "шлем", "шнур", "шоколад", "шорох", "шторм", "шутка",
  "щетка", "щенок", "экран", "экспорт", "энергия", "эпоха", "юг", "юла", "юбка", "юмор",
  "яблоко", "ярмарка", "ярость", "язык", "ягода"
];
let score = 0;
let usedIndexes = new Set();
let currentWord = "";
let shuffledWord = [];
const scoreboard = document.getElementById('scoreboard');
const hint = document.getElementById('hint');
const wordContainer = document.getElementById('wordContainer');
const message = document.getElementById('message');

function shuffleArray(arr) {
  for(let i = arr.length -1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function pickNewWord() {
  if (usedIndexes.size === words.length) {
    message.textContent = "Слова закончились! Игра окончена.";
    wordContainer.innerHTML = "";
    hint.textContent = "Подсказка: -";
    return false;
  }
  let idx;
  do {
    idx = Math.floor(Math.random() * words.length);
  } while (usedIndexes.has(idx));
  usedIndexes.add(idx);
  currentWord = words[idx];
  return true;
}

function displayShuffledWord() {
  let arr = currentWord.split('');
  do {
    arr = shuffleArray(arr.slice());
  } while(arr.join('') === currentWord);
  shuffledWord = arr;
  renderWord();
  message.textContent = "";
  showHint();
}

function renderWord() {
  wordContainer.innerHTML = "";
  shuffledWord.forEach((letter, i) => {
    const span = document.createElement('div');
    span.classList.add('letter');
    span.textContent = letter.toUpperCase();
    span.onclick = () => {
      if(i < shuffledWord.length - 1) {
        [shuffledWord[i], shuffledWord[i+1]] = [shuffledWord[i+1], shuffledWord[i]];
      } else if(i > 0) {
        [shuffledWord[i], shuffledWord[i-1]] = [shuffledWord[i-1], shuffledWord[i]];
      }
      renderWord();
      checkAnswer();
    }
    wordContainer.appendChild(span);
  });
}

function showHint() {
  const randomIndex = Math.floor(Math.random() * currentWord.length);
  const letter = currentWord[randomIndex].toUpperCase();
  hint.textContent = `Подсказка: буква — ${letter}`;
}

function checkAnswer() {
  const answer = shuffledWord.join('');
  if(answer === currentWord) {
    score++;
    scoreboard.textContent = `Очки: ${score}`;
    message.textContent = "Правильно!";
    triggerFirework();
    setTimeout(() => {
      message.textContent = "";
      if(pickNewWord()) {
        displayShuffledWord();
      }
    }, 1500);
  } else {
    message.textContent = "";
  }
}

function triggerFirework() {
  const firework = document.createElement('div');
  firework.className = 'firework';
  document.body.appendChild(firework);
  setTimeout(() => {
    firework.remove();
  }, 800);
}

function startGame() {
  score = 0;
  usedIndexes.clear();
  scoreboard.textContent = `Очки: ${score}`;
  message.textContent = "";
  if(pickNewWord()) {
    displayShuffledWord();
  }
}

startGame();
</script>

</body>
</html>
